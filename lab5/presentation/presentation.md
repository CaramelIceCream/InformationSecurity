---
## Front matter
lang: ru-RU
title: Отчет по лабораторной работе №5
author: Дерябина Мария
institute: RUDN University, Moscow, Russian Federation
date: 2021

## Formatting
mainfont: Times New Roman
romanfont: Times New Roman
sansfont: Times New Roman
monofont: Times New Roman
toc: false
slide_level: 2
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

## Цель работы

Изучить механизмы изменения идентификаторов, применения
SetUID- и Sticky-биты. 

Получить практические навыки работы в консоли с дополнительными атрибутами. 

Рассмотреть работы механизма
смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.


## Выполнение. Исследование SetUID- и SetGID-битов

Вошла в систему от пользователя guest и создала программу simpleid.c

![Код программы simpleid.c](../image/3.png){#fig:003 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Скомпилировала и выполнила программу. Полученный результат совпал с выводом команды id

![Компиляция и выполнение программы simpleid.c](../image/4.png){#fig:004 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Добавила в программу вывод действительных идентификаторов, назвала ее simpleid2.c

![Код программы simpleid2.c](../image/5.png){#fig:005 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Скомпилировала и запустила программу simpleid2.c. Действительные идентификаторы совпали с эффективными

![Компиляция и выполнение программы simpleid2.c](../image/6.png){#fig:006 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

От имени суперпользователя изменила владельца программы simpleid2 на root и добавила атрибут SetUID

Проверила правильность установки новых атрибутов и смены владельца файла simpleid2 и запустила simpleid2. Теперь вывод программы отличается от вывода команды id. Действительные идентификаторы остались прежними, а эффективный идентификатор пользователя теперь равен 0 - это идентификатор суперпользователя. Это значит, что пользователь guest использует права суперпользователя во время выполнения программы 

![Вывод программы simpleid2 с атрибутом SetUID](../image/8.png){#fig:008 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Проделала то же самое относительно SetGID-бита. Результат оказался аналогичным, теперь при выполнении simpleid2 от пользователя guest эффектиынй идентификатор группы равени идентификатору группы суперпользователя

![Вывод программы simpleid2 с атрибутом SetUID и SetGID](../image/10.png){#fig:010 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Создала программу readfile.c

![Код программы readfile.c](../image/11.png){#fig:011 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Сменила владельца у файла readfile.c и изменила права так, чтобы только суперпользователь мог прочитать его, а guest не мог

Сменила у программы readfile вдадельца на root и установила SetUID-бит 

![Добавление SetUID-бита к программе readfile](../image/15.png){#fig:015 width=70%}

## Выполнение. Исследование SetUID- и SetGID-битов

Теперь с помощью программы readfile можно от имени пользователя guest прочитать файл readfile.c

![Чтение файла readfile.c с помощью readfile](../image/16.png){#fig:016 width=70%}


## Исследование Sticky-бита

Посмотрела, что на директории /tmp установлен атрибут Sticky. От имени пользователя guest создала файл file01.txt в директории /tmp со словом "test". Посмотрела атрибуты у file01.txt и разрешила чтение и запись для категории пользователей "other".
От пользователя guest2 попробовала выполнить различные действия - прочитать файл, дозаписать текст в файл, переписать текст в файле, удалить файл. Получилось сделать все, кроме удаления файла

![Выполнение операций над file01.txt от имени guest2](../image/18.png){#fig:018 width=70%}

## Исследование Sticky-бита

От имени суперпользователя сняла Sticky-бит с директории /tmp. 

Повторила предыдущие шаги. В этот раз удалось удалить file01.txt. 

Таким образом, со снятым атрибутом Sticky можно удалить из директории файл от имени пользователя, не являющегося его владельцем

![Выполнение операций над file01.txt со снятым атрибутом Sticky](../image/20.png){#fig:020 width=70%}


## Выводы

Я изучила механизмы изменения идентификаторов, применения
SetUID- и Sticky-биты. 

Получила практические навыки работы в консоли с дополнительными атрибутами. 

Рассмотрела работы механизма
смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.
